Supercombinator definitions
Code for I:
   {Take (1,1),
    Enter Arg 1}


Code for K:
   {Take (2,2),
    Enter Arg 1}


Code for K1:
   {Take (2,2),
    Enter Arg 2}


Code for S:
   {Take (3,3),
    Push Code {Push Arg 3,
               Enter Arg 2},
    Push Arg 3,
    Enter Arg 1}


Code for compose:
   {Take (3,3),
    Push Code {Push Arg 3,
               Enter Arg 2},
    Enter Arg 1}


Code for twice:
   {Take (1,1),
    Push Arg 1,
    Push Arg 1,
    Enter Label "compose"}


Code for f:
   {Take (6,2),
    Push Code {Push Code {Op Add,
                          Return},
               Move 3 IntConst 1,
               Move 4 IntConst 2,
               Move 5 IntConst 3,
               Push Code {Push Code {Op Add,
                                     Return},
                          Enter Arg 4},
               Enter Arg 1},
    Move 3 IntConst 2,
    Move 4 IntConst 4,
    Move 5 IntConst 5,
    Move 6 IntConst 6,
    Push Code {Push Code {Op Add,
                          Return},
               Enter Arg 5},
    Enter Arg 2}


Code for main:
   {Push IntConst 20,
    Push IntConst 10,
    Enter Label "f"}



State transitions

   0) Code:  {Enter Label "main"}
      Null frame ptr
      Arg stack: [({},FrameNull)]
      VStack:[]
      
   1) Code:  {Push IntConst 20, Push IntConst 10, Enter Label "f"}
      Null frame ptr
      Arg stack: [({},FrameNull)]
      VStack:[]
      
   2) Code:  {Push IntConst 10, Enter Label "f"}
      Null frame ptr
      Arg stack: [({PushV FramePtr, Return},FrameInt 20)
                  ({},FrameNull)]
      VStack:[]
      
   3) Code:  {Enter Label "f"}
      Null frame ptr
      Arg stack: [({PushV FramePtr, Return},FrameInt 10)
                  ({PushV FramePtr, Return},FrameInt 20)
                  ({},FrameNull)]
      VStack:[]
      
   4) Code:  {Take (6,2), Push Code {..}, Move 3 IntConst 2, ..}
      Null frame ptr
      Arg stack: [({PushV FramePtr, Return},FrameInt 10)
                  ({PushV FramePtr, Return},FrameInt 20)
                  ({},FrameNull)]
      VStack:[]
      
   5) Code:  {Push Code {..}, Move 3 IntConst 2, Move 4 IntConst 4, ..}
      Frame: <({PushV FramePtr, Return},FrameInt 10)
              ({PushV FramePtr, Return},FrameInt 20)
              ({},FrameNull)
              ({},FrameNull)
              ({},FrameNull)
              ({},FrameNull)>
      Arg stack: [({},FrameNull)]
      VStack:[]
      
   6) Code:  {Move 3 IntConst 2, Move 4 IntConst 4, Move 5 IntConst 5, ..}
      Frame: <({PushV FramePtr, Return},FrameInt 10)
              ({PushV FramePtr, Return},FrameInt 20)
              ({},FrameNull)
              ({},FrameNull)
              ({},FrameNull)
              ({},FrameNull)>
      Arg stack: [({Push Code {..}, Move 3 IntConst 1, Move 4 IntConst 2, ..},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[]
      
   7) Code:  {Move 4 IntConst 4, Move 5 IntConst 5, Move 6 IntConst 6, ..}
      Frame: <({PushV FramePtr, Return},FrameInt 10)
              ({PushV FramePtr, Return},FrameInt 20)
              ({PushV FramePtr, Return},FrameInt 2)
              ({},FrameNull)
              ({},FrameNull)
              ({},FrameNull)>
      Arg stack: [({Push Code {..}, Move 3 IntConst 1, Move 4 IntConst 2, ..},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[]
      
   8) Code:  {Move 5 IntConst 5, Move 6 IntConst 6, Push Code {..}, ..}
      Frame: <({PushV FramePtr, Return},FrameInt 10)
              ({PushV FramePtr, Return},FrameInt 20)
              ({PushV FramePtr, Return},FrameInt 2)
              ({PushV FramePtr, Return},FrameInt 4)
              ({},FrameNull)
              ({},FrameNull)>
      Arg stack: [({Push Code {..}, Move 3 IntConst 1, Move 4 IntConst 2, ..},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[]
      
   9) Code:  {Move 6 IntConst 6, Push Code {..}, Enter Arg 2}
      Frame: <({PushV FramePtr, Return},FrameInt 10)
              ({PushV FramePtr, Return},FrameInt 20)
              ({PushV FramePtr, Return},FrameInt 2)
              ({PushV FramePtr, Return},FrameInt 4)
              ({PushV FramePtr, Return},FrameInt 5)
              ({},FrameNull)>
      Arg stack: [({Push Code {..}, Move 3 IntConst 1, Move 4 IntConst 2, ..},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[]
      
  10) Code:  {Push Code {..}, Enter Arg 2}
      Frame: <({PushV FramePtr, Return},FrameInt 10)
              ({PushV FramePtr, Return},FrameInt 20)
              ({PushV FramePtr, Return},FrameInt 2)
              ({PushV FramePtr, Return},FrameInt 4)
              ({PushV FramePtr, Return},FrameInt 5)
              ({PushV FramePtr, Return},FrameInt 6)>
      Arg stack: [({Push Code {..}, Move 3 IntConst 1, Move 4 IntConst 2, ..},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[]
      
  11) Code:  {Enter Arg 2}
      Frame: <({PushV FramePtr, Return},FrameInt 10)
              ({PushV FramePtr, Return},FrameInt 20)
              ({PushV FramePtr, Return},FrameInt 2)
              ({PushV FramePtr, Return},FrameInt 4)
              ({PushV FramePtr, Return},FrameInt 5)
              ({PushV FramePtr, Return},FrameInt 6)>
      Arg stack: [({Push Code {..}, Enter Arg 5},FrameAddr 1)
                  ({Push Code {..}, Move 3 IntConst 1, Move 4 IntConst 2, ..},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[]
      
  12) Code:  {PushV FramePtr, Return}
      Frame ptr (int): 20
      Arg stack: [({Push Code {..}, Enter Arg 5},FrameAddr 1)
                  ({Push Code {..}, Move 3 IntConst 1, Move 4 IntConst 2, ..},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[]
      
  13) Code:  {Return}
      Frame ptr (int): 20
      Arg stack: [({Push Code {..}, Enter Arg 5},FrameAddr 1)
                  ({Push Code {..}, Move 3 IntConst 1, Move 4 IntConst 2, ..},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[20]
      
  14) Code:  {Push Code {..}, Enter Arg 5}
      Frame: <({PushV FramePtr, Return},FrameInt 10)
              ({PushV FramePtr, Return},FrameInt 20)
              ({PushV FramePtr, Return},FrameInt 2)
              ({PushV FramePtr, Return},FrameInt 4)
              ({PushV FramePtr, Return},FrameInt 5)
              ({PushV FramePtr, Return},FrameInt 6)>
      Arg stack: [({Push Code {..}, Move 3 IntConst 1, Move 4 IntConst 2, ..},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[20]
      
  15) Code:  {Enter Arg 5}
      Frame: <({PushV FramePtr, Return},FrameInt 10)
              ({PushV FramePtr, Return},FrameInt 20)
              ({PushV FramePtr, Return},FrameInt 2)
              ({PushV FramePtr, Return},FrameInt 4)
              ({PushV FramePtr, Return},FrameInt 5)
              ({PushV FramePtr, Return},FrameInt 6)>
      Arg stack: [({Op Add, Return},FrameAddr 1)
                  ({Push Code {..}, Move 3 IntConst 1, Move 4 IntConst 2, ..},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[20]
      
  16) Code:  {PushV FramePtr, Return}
      Frame ptr (int): 5
      Arg stack: [({Op Add, Return},FrameAddr 1)
                  ({Push Code {..}, Move 3 IntConst 1, Move 4 IntConst 2, ..},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[20]
      
  17) Code:  {Return}
      Frame ptr (int): 5
      Arg stack: [({Op Add, Return},FrameAddr 1)
                  ({Push Code {..}, Move 3 IntConst 1, Move 4 IntConst 2, ..},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[5, 20]
      
  18) Code:  {Op Add, Return}
      Frame: <({PushV FramePtr, Return},FrameInt 10)
              ({PushV FramePtr, Return},FrameInt 20)
              ({PushV FramePtr, Return},FrameInt 2)
              ({PushV FramePtr, Return},FrameInt 4)
              ({PushV FramePtr, Return},FrameInt 5)
              ({PushV FramePtr, Return},FrameInt 6)>
      Arg stack: [({Push Code {..}, Move 3 IntConst 1, Move 4 IntConst 2, ..},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[5, 20]
      
  19) Code:  {Return}
      Frame: <({PushV FramePtr, Return},FrameInt 10)
              ({PushV FramePtr, Return},FrameInt 20)
              ({PushV FramePtr, Return},FrameInt 2)
              ({PushV FramePtr, Return},FrameInt 4)
              ({PushV FramePtr, Return},FrameInt 5)
              ({PushV FramePtr, Return},FrameInt 6)>
      Arg stack: [({Push Code {..}, Move 3 IntConst 1, Move 4 IntConst 2, ..},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[25]
      
  20) Code:  {Push Code {..}, Move 3 IntConst 1, Move 4 IntConst 2, ..}
      Frame: <({PushV FramePtr, Return},FrameInt 10)
              ({PushV FramePtr, Return},FrameInt 20)
              ({PushV FramePtr, Return},FrameInt 2)
              ({PushV FramePtr, Return},FrameInt 4)
              ({PushV FramePtr, Return},FrameInt 5)
              ({PushV FramePtr, Return},FrameInt 6)>
      Arg stack: [({},FrameNull)]
      VStack:[25]
      
  21) Code:  {Move 3 IntConst 1, Move 4 IntConst 2, Move 5 IntConst 3, ..}
      Frame: <({PushV FramePtr, Return},FrameInt 10)
              ({PushV FramePtr, Return},FrameInt 20)
              ({PushV FramePtr, Return},FrameInt 2)
              ({PushV FramePtr, Return},FrameInt 4)
              ({PushV FramePtr, Return},FrameInt 5)
              ({PushV FramePtr, Return},FrameInt 6)>
      Arg stack: [({Op Add, Return},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[25]
      
  22) Code:  {Move 4 IntConst 2, Move 5 IntConst 3, Push Code {..}, ..}
      Frame: <({PushV FramePtr, Return},FrameInt 10)
              ({PushV FramePtr, Return},FrameInt 20)
              ({PushV FramePtr, Return},FrameInt 1)
              ({PushV FramePtr, Return},FrameInt 4)
              ({PushV FramePtr, Return},FrameInt 5)
              ({PushV FramePtr, Return},FrameInt 6)>
      Arg stack: [({Op Add, Return},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[25]
      
  23) Code:  {Move 5 IntConst 3, Push Code {..}, Enter Arg 1}
      Frame: <({PushV FramePtr, Return},FrameInt 10)
              ({PushV FramePtr, Return},FrameInt 20)
              ({PushV FramePtr, Return},FrameInt 1)
              ({PushV FramePtr, Return},FrameInt 2)
              ({PushV FramePtr, Return},FrameInt 5)
              ({PushV FramePtr, Return},FrameInt 6)>
      Arg stack: [({Op Add, Return},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[25]
      
  24) Code:  {Push Code {..}, Enter Arg 1}
      Frame: <({PushV FramePtr, Return},FrameInt 10)
              ({PushV FramePtr, Return},FrameInt 20)
              ({PushV FramePtr, Return},FrameInt 1)
              ({PushV FramePtr, Return},FrameInt 2)
              ({PushV FramePtr, Return},FrameInt 3)
              ({PushV FramePtr, Return},FrameInt 6)>
      Arg stack: [({Op Add, Return},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[25]
      
  25) Code:  {Enter Arg 1}
      Frame: <({PushV FramePtr, Return},FrameInt 10)
              ({PushV FramePtr, Return},FrameInt 20)
              ({PushV FramePtr, Return},FrameInt 1)
              ({PushV FramePtr, Return},FrameInt 2)
              ({PushV FramePtr, Return},FrameInt 3)
              ({PushV FramePtr, Return},FrameInt 6)>
      Arg stack: [({Push Code {..}, Enter Arg 4},FrameAddr 1)
                  ({Op Add, Return},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[25]
      
  26) Code:  {PushV FramePtr, Return}
      Frame ptr (int): 10
      Arg stack: [({Push Code {..}, Enter Arg 4},FrameAddr 1)
                  ({Op Add, Return},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[25]
      
  27) Code:  {Return}
      Frame ptr (int): 10
      Arg stack: [({Push Code {..}, Enter Arg 4},FrameAddr 1)
                  ({Op Add, Return},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[10, 25]
      
  28) Code:  {Push Code {..}, Enter Arg 4}
      Frame: <({PushV FramePtr, Return},FrameInt 10)
              ({PushV FramePtr, Return},FrameInt 20)
              ({PushV FramePtr, Return},FrameInt 1)
              ({PushV FramePtr, Return},FrameInt 2)
              ({PushV FramePtr, Return},FrameInt 3)
              ({PushV FramePtr, Return},FrameInt 6)>
      Arg stack: [({Op Add, Return},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[10, 25]
      
  29) Code:  {Enter Arg 4}
      Frame: <({PushV FramePtr, Return},FrameInt 10)
              ({PushV FramePtr, Return},FrameInt 20)
              ({PushV FramePtr, Return},FrameInt 1)
              ({PushV FramePtr, Return},FrameInt 2)
              ({PushV FramePtr, Return},FrameInt 3)
              ({PushV FramePtr, Return},FrameInt 6)>
      Arg stack: [({Op Add, Return},FrameAddr 1)
                  ({Op Add, Return},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[10, 25]
      
  30) Code:  {PushV FramePtr, Return}
      Frame ptr (int): 2
      Arg stack: [({Op Add, Return},FrameAddr 1)
                  ({Op Add, Return},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[10, 25]
      
  31) Code:  {Return}
      Frame ptr (int): 2
      Arg stack: [({Op Add, Return},FrameAddr 1)
                  ({Op Add, Return},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[2, 10, 25]
      
  32) Code:  {Op Add, Return}
      Frame: <({PushV FramePtr, Return},FrameInt 10)
              ({PushV FramePtr, Return},FrameInt 20)
              ({PushV FramePtr, Return},FrameInt 1)
              ({PushV FramePtr, Return},FrameInt 2)
              ({PushV FramePtr, Return},FrameInt 3)
              ({PushV FramePtr, Return},FrameInt 6)>
      Arg stack: [({Op Add, Return},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[2, 10, 25]
      
  33) Code:  {Return}
      Frame: <({PushV FramePtr, Return},FrameInt 10)
              ({PushV FramePtr, Return},FrameInt 20)
              ({PushV FramePtr, Return},FrameInt 1)
              ({PushV FramePtr, Return},FrameInt 2)
              ({PushV FramePtr, Return},FrameInt 3)
              ({PushV FramePtr, Return},FrameInt 6)>
      Arg stack: [({Op Add, Return},FrameAddr 1)
                  ({},FrameNull)]
      VStack:[12, 25]
      
  34) Code:  {Op Add, Return}
      Frame: <({PushV FramePtr, Return},FrameInt 10)
              ({PushV FramePtr, Return},FrameInt 20)
              ({PushV FramePtr, Return},FrameInt 1)
              ({PushV FramePtr, Return},FrameInt 2)
              ({PushV FramePtr, Return},FrameInt 3)
              ({PushV FramePtr, Return},FrameInt 6)>
      Arg stack: [({},FrameNull)]
      VStack:[12, 25]
      
  35) Code:  {Return}
      Frame: <({PushV FramePtr, Return},FrameInt 10)
              ({PushV FramePtr, Return},FrameInt 20)
              ({PushV FramePtr, Return},FrameInt 1)
              ({PushV FramePtr, Return},FrameInt 2)
              ({PushV FramePtr, Return},FrameInt 3)
              ({PushV FramePtr, Return},FrameInt 6)>
      Arg stack: [({},FrameNull)]
      VStack:[37]
      
  36) Code:  {}
      Null frame ptr
      Arg stack: []
      VStack:[37]
      


Steps taken = 36
Frames allocated =  1
Total heap allocations = 2
